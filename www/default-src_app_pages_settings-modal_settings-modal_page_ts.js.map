{"version":3,"file":"default-src_app_pages_settings-modal_settings-modal_page_ts.js","mappings":"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","sources":["./src/app/apis/get-user-details.service.ts","./src/app/pages/settings-modal/settings-modal.page.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { response } from 'express';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GetUserDetailsService {\n\n  constructor(private http :HttpClient) { }\n  \n  getImage(){\n    return this.http.get('http://127.0.0.1/ratify/user_details.php', {withCredentials:true})\n    .pipe(map((response: any) => response['image']));\n  }\n  getUsername(){\n    return this.http.get('http://127.0.0.1/ratify/user_details.php', {withCredentials:true})\n    .pipe(map((response: any) => response['username']));\n  }\n  getName(): Observable<any> {\n    return this.http.get('http://127.0.0.1/ratify/user_details.php', {withCredentials:true})\n    .pipe(map((response: any) => response['name']));\n   }\n   getRates(username) : Observable<any>{\n     return this.http.post(`http://127.0.0.1/ratify/get_users_rates.php?username=${username}`, JSON.stringify(username), {withCredentials:true})\n    .pipe(map((response:any)=>response));\n   \n   }\n}\n","import { HttpHeaders } from '@angular/common/http';\nimport { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { AlertController } from '@ionic/angular';\nimport { GetUserDetailsService } from 'src/app/apis/get-user-details.service';\nimport { Router } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-settings-modal',\n  templateUrl: './settings-modal.page.html',\n  styleUrls: ['./settings-modal.page.scss'],\n})\nexport class SettingsModalPage implements OnInit {\n\n  username : string;\n  name : string;\n  old_pass : string;\n  new_pass : string;\n  user_name : string;\n\n  constructor(private modalCtrl : ModalController, private http : HttpClient, \n    private user : GetUserDetailsService, private route : Router, private alertCtrl : AlertController,\n    private toastCtrl :ToastController) { }\n \n  ngOnInit() {\n     this.user.getUsername().subscribe(data =>{\n      this.user_name =data;\n     })\n  }\n  close(){\n    this.modalCtrl.dismiss();\n  }\n  async toast(message, color){\n    const toast = this.toastCtrl.create({\n      message : message,\n      duration : 2000,\n      color: color\n    });\n    (await toast).present();\n  }\n  \n\n  showUserInput(){\n    var user_input = document.getElementById('username_input');\n    user_input.classList.toggle('hide');\n  }\n  showPasswordInput(){\n    var password_input = document.getElementById('password_input');\n    password_input.classList.toggle('hide');\n  }\n  showNameInput(){\n    var name_input = document.getElementById('name_input');\n    name_input.classList.toggle('hide');\n  }\n\n  updateName(){\n   var headers = new HttpHeaders();\n   headers.append('Access-Control-Allow-Origin', '*');\n   this.http.post('http://127.0.0.1/ratify/update_name.php',JSON.stringify(this.name), {headers:headers,withCredentials: true}).subscribe((response: any)=>{\n    console.log(response);\n    this.toast(response['status'], 'success');\n  });\n\n  }\n  \n  updateUsername(){\n    var headers = new HttpHeaders();\n    headers.append('Access-Control-Allow-Origin', '*');\n    this.http.post('http://127.0.0.1/ratify/update_username.php',JSON.stringify(this.username), {headers:headers,withCredentials: true}).subscribe((response: any)=>{\n     console.log(response);\n     if(response['status'] == 'success'){\n      this.toast(response['status'], 'success');\n      this.user_name = response['new'];\n     }\n     else{\n      this.toast(response['status'], 'danger');\n     }\n   });\n  \n}\n\nupdatePassword(){\n  var headers = new HttpHeaders();\n   headers.append('Access-Control-Allow-Origin', '*');\n   const password={\n    \"new_pass\" : this.new_pass,\n    \"old_pass\" : this.old_pass,\n   }\n   this.http.post('http://127.0.0.1/ratify/update_password.php',JSON.stringify(password), {headers:headers,withCredentials: true}).subscribe((response: any)=>{\n    console.log(response);\n    if(response['status'] == 'Password Changed'){\n      this.toast(response['status'], 'success');\n     }\n     else{\n      this.toast(response['status'], 'danger');\n     }\n   \n  });\n}\n\nasync logout(){\n  let alert = this.alertCtrl.create({\n    header: 'Logout',\n    buttons: [\n      {\n        text: 'Cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'Logout',\n        handler: () => {\n           var headers = new HttpHeaders();\n            headers.append('Access-Control-Allow-Origin', '*');\n            this.http.post('http://127.0.0.1/ratify/logout.php', JSON.stringify(this.username), {headers:headers,withCredentials: true}).subscribe((response: any)=>{\n            console.log(response);\n            this.close();\n            this.route.navigate(['home']);\n            this.toast('Logged Out Successfully', 'success');\n       });\n        }\n      }\n    ]\n  });\n(await alert).present();\n  \n}\n\nasync delete(){\n  let alert = this.alertCtrl.create({\n    header: 'Delete Account',\n    message: 'Are you sure you want to permanently delete this account?',\n    buttons: [\n      {\n        text: 'Cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n          this.close();\n        }\n      },\n      {\n        text: 'Delete',\n        handler: () => {\n          var headers = new HttpHeaders();\n          headers.append('Access-Control-Allow-Origin', '*');\n          this.http.post('http://127.0.0.1/ratify/delete.php', JSON.stringify(this.username), {headers:headers,withCredentials: true}).subscribe((response: any)=>{\n            console.log(response);\n            this.close();\n            this.route.navigate(['home']);\n            this.toast('User Permanently Deleted', 'danger');\n  });\n        }\n      }\n    ]\n  });\n  (await alert).present();\n\n}\n}\n"],"names":[],"sourceRoot":"webpack:///"}